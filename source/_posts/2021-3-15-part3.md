---
title: vue中使用jsx
date: 2021-3-15
---

#### 虚拟DOM
js操作DOM的计算成本和更新成本很高，vue等框架使用js对象，通过改变js对象，进行批量处理，一次更新DOM，所以虚拟DOM本质上就是一个js对象
所带来的优点是：
1、从原先的操作真实DOM到操作虚拟DOM，降低查找成本
2、通过diff比对，我们可以更快的定位数据的变化，从而更新DOM
3、更好的ui更新

<!--more-->
渲染函数
渲染函数(render)用来生成虚拟DOM的，在vue单文件中编写模板语法，最终会在底层实现中被编译成渲染函数
[https://juejin.cn/post/6844903973502058504](https://juejin.cn/post/6844903973502058504)


template的实现和render函数的实现对比：
![图片描述](/img/part-3/1.png)
--
![图片描述](/img/part-3/2.png)

#### jsx

vue提供一个babel-plugin-jsx babel插件让vue支持jsx写法，使其更接近模板的写法
![图片描述](/img/part-3/3.png)
也可采用setup写法
![图片描述](/img/part-3/4.png)

几种开发常用写法
class、style绑定：
```
render() {
    return () => <div class="test">我是一个div</div>;
},
setup() {
    return () => <div style={{ color: "red" }}>我是div</div>;
},
```

props绑定
```
父组件
setup() {
    return () => (
      <div style={{ color: "red" }}>
        <span>我是父组件</span>
        <Mycom msg={"我是父组件传的值"} />
      </div>
);
子组件
setup(props) {
  return () => <div>我是子组件{props.msg}</div>;
}

```  


```
事件绑定

```
setup() {
    function eventClick() {
      console.log("点击");
    }
    return () => <button onClick={eventClick}>点击</button>;
},

```
v-if，v-for等指令在jsx中无法使用，只支持v-model和v-show

```
setup() {
  const input = ref("");
  return () => (
    <div>
      <span v-show={true}>显示</span>
      <span v-show={false}>隐藏</span>
      <input type="text" v-model={input.value} />
      <span>{input.value}</span>
    </div>
  );
},
